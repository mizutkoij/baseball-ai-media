{
  "name": "baseball-ai-media",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest run --coverage",
    "test:integration": "vitest run tests/integration",
    "ingest:month": "npx ts-node scripts/ingest_month.ts",
    "compute:constants": "npx ts-node scripts/compute_constants_simple.ts",
    "compute:constants:full": "npx ts-node scripts/compute_constants.ts",
    "derive:bullpen": "npx tsx scripts/compute_bullpen_strength.ts",
    "derive:rap": "npx tsx scripts/compute_rap.ts",
    "check:disk": "npx ts-node scripts/check_disk.ts",
    "backfill:monthly": "npm run check:disk && npx ts-node scripts/backfill_history.ts",
    "gen:season": "npx ts-node scripts/generate_season_capsule.ts",
    "gen:similarity-cache": "npx ts-node scripts/generate_similarity_cache.ts",
    "notify": "npx ts-node scripts/notify.ts",
    "lint:forbidden": "npx ts-node scripts/guard_forbidden.ts",
    "test:golden": "vitest run golden-sample.test.ts",
    "debug:game": "npx ts-node scripts/debug_game.ts",
    "snapshot:og": "node scripts/snapshot_og_simple.js",
    "check:uidensity": "node scripts/ui_density_check.js",
    "fetch:schedule": "npx tsx scripts/fetch_npb_schedule.ts",
    "wikipedia:batch": "npx tsx scripts/batch-wikipedia-fetch.ts",
    "fetch:today": "npx tsx scripts/fetch_npb_schedule.ts --today",
    "auto:update": "npx tsx scripts/auto_update_schedule.ts --mode continuous",
    "auto:once": "npx tsx scripts/auto_update_schedule.ts --mode once",
    "auto:monthly": "npx tsx scripts/auto_update_schedule.ts --mode monthly",
    "scrape:test": "npx tsx scripts/automated-scraper.ts --schedule-only --data-dir ./data/test",
    "scrape:morning-update": "npx tsx scripts/automated-scraper.ts --schedule-only",
    "scrape:afternoon-starters": "npx tsx scripts/automated-scraper.ts --starters-only",
    "scrape:evening-results": "npx tsx scripts/automated-scraper.ts --schedule-only",
    "scrape:night-detailed": "npx tsx scripts/automated-scraper.ts --detailed-only",
    "heatmap:compute": "npx tsx scripts/heatmap_precompute.ts",
    "heatmap:compute:today": "npx tsx scripts/heatmap_precompute.ts --date=$(date +%F)",
    "schedule:start": "npx tsx scripts/cron-scheduler.ts --start",
    "schedule:run-now": "npx tsx scripts/cron-scheduler.ts --run-now",
    "schedule:test": "npx tsx scripts/cron-scheduler.ts --test-run",
    "validate:starters": "npx tsx lib/data-validator.ts data/starters starters",
    "validate:keyplays": "npx tsx lib/data-validator.ts data/keyplays keyplays",
    "metrics": "npx tsx scripts/metrics-server.ts",
    "scrape:current": "npx tsx scripts/scrape_npb_real_data.ts",
    "scrape:historical": "npx tsx scripts/scrape_npb_historical_data.ts",
    "scrape:all": "npx tsx scripts/npb_data_manager.ts",
    "scrape:quick": "npx tsx scripts/npb_data_manager.ts --quick",
    "scrape:full": "npx tsx scripts/npb_data_manager.ts --full",
    "scrape:2020-2024": "npx tsx scripts/npb_data_manager.ts --historical-only --start 2020 --end 2024",
    "scrape:enhanced": "npx tsx scripts/scrape_npb_enhanced_data.ts",
    "scrape:enhanced:2024": "npx tsx scripts/scrape_npb_enhanced_data.ts --year 2024",
    "scrape:enhanced:2023": "npx tsx scripts/scrape_npb_enhanced_data.ts --year 2023",
    "schedule:smart": "npx tsx scripts/smart-scheduler.ts",
    "schedule:plan": "npx tsx -e \"import('./lib/schedule-policy').then(m=>m.planFor(process.argv[2]||new Date().toISOString().slice(0,10)).then(p=>require('./lib/schedule-policy').debugPlan(p)))\"",
    "schedule:backfill": "npx tsx scripts/smart-scheduler.ts --backfill",
    "test:scheduling": "npx tsx scripts/test-smart-scheduling.ts",
    "test:canonical": "npx tsx scripts/test-canonical-system.ts",
    "recovery:test": "npx tsx scripts/auto-recovery.ts ScrapeFailureSpike '{\"test\":true}'",
    "recovery:check": "npx tsx scripts/auto-recovery.ts --status",
    "lifecycle:run": "npx tsx scripts/data-lifecycle.ts run",
    "lifecycle:backup": "npx tsx scripts/data-lifecycle.ts backup",
    "lifecycle:status": "npx tsx scripts/data-lifecycle.ts status",
    "rate:status": "npx tsx -e \"import('./lib/adaptive-rate-limiter').then(m=>console.log(JSON.stringify(m.adaptiveRateLimiter.getStatus(),null,2)))\"",
    "ops:health": "npx tsx -e \"console.log('ðŸ” NPB System Health Check'); Promise.all([fetch('http://localhost:9090/health').then(r=>r.json()).catch(e=>'âŒ Metrics down'), fetch('https://baseball-ai-media.vercel.app/health').then(r=>r.json()).catch(e=>'âŒ Web down')]).then(results => results.forEach(r=>console.log(r)))\"",
    "ml:features": "npx tsx features/build_pregame_dataset.ts",
    "ml:train": "cd ml && python train_pregame.py --trials 30",
    "ml:train-quick": "cd ml && python train_pregame.py --no-optimize",
    "predict:pregame": "npx tsx scripts/predict_pregame.ts run",
    "predict:pregame-force": "npx tsx scripts/predict_pregame.ts run --force",
    "predict:health": "npx tsx scripts/predict_pregame.ts health",
    "predict:info": "npx tsx scripts/predict_pregame.ts info",
    "predict:live:once": "npx tsx scripts/predict_live_once.ts",
    "serve:live": "npx tsx scripts/live-server.ts",
    "live:replay": "npx tsx scripts/replay_timeline.ts",
    "live:evaluate": "npx tsx scripts/evaluate_live_game.ts",
    "tune:live": "npx tsx scripts/tune_live.ts",
    "ml:matchup:features": "npx tsx features/build_matchup_dataset.ts",
    "ml:matchup:train": "python ml/train_matchup.py",
    "ops:guardrail": "npx tsx scripts/guardrail.ts --metrics http://localhost:8787/metrics --ll-thresh 0.69 --br-thresh 0.22 --consec 3",
    "ops:chaos": "npx tsx scripts/chaos_replay.ts",
    "ops:rotate": "python scripts/rotate_storage.py --date yesterday",
    "ops:rotate-dry": "python scripts/rotate_storage.py --date yesterday --dry-run",
    "ml:nextpitch:features": "npx tsx features/build_pitch_dataset.ts 2025-08-01 2025-08-12",
    "ml:nextpitch:train": "python ml/train_next_pitch.py --data data/ml/nextpitch/train_latest.parquet --out models/nextpitch",
    "predict:nextpitch:once": "npx tsx scripts/predict_next_pitch.ts --date=$(date +%F) --gameId=XXXX",
    "ingest:pbp": "npx tsx scripts/ingest_pbp.ts",
    "ingest:pbp:today": "npx tsx scripts/ingest_pbp.ts --date=$(date +%F)",
    "sync:lineups": "npx tsx scripts/sync_lineups.ts",
    "sync:lineups:today": "npx tsx scripts/sync_lineups.ts --date=$(date +%F)",
    "data:quality": "npx tsx -e \"import('./lib/prometheus-metrics').then(m => console.log('Coverage metrics:', m.coveragePitchesTotal._hashMap))\"",
    "version:commit-model": "npx tsx scripts/model-version-manager.ts commit-model",
    "version:commit-config": "npx tsx scripts/model-version-manager.ts commit-config",
    "version:switch-model": "npx tsx scripts/model-version-manager.ts switch-model",
    "version:switch-config": "npx tsx scripts/model-version-manager.ts switch-config",
    "version:list": "npx tsx scripts/model-version-manager.ts list",
    "version:cleanup": "npx tsx scripts/model-version-manager.ts cleanup",
    "rollback:monitor": "npx tsx scripts/auto-rollback-enhanced.ts monitor",
    "rollback:check": "npx tsx scripts/auto-rollback-enhanced.ts check",
    "rollback:force": "npx tsx scripts/auto-rollback-enhanced.ts force-rollback",
    "rollback:status": "npx tsx scripts/auto-rollback-enhanced.ts status",
    "load-test:sse": "npx tsx scripts/load-test-sse.ts",
    "memory:status": "npx tsx -e \"import('./lib/memory-monitor').then(m => console.log(JSON.stringify(m.getMemoryStatus(), null, 2)))\"",
    "game-day:T-24h": "npx tsx scripts/game-day-ops.ts T-24h",
    "game-day:T-0": "npx tsx scripts/game-day-ops.ts T-0",
    "game-day:Live": "npx tsx scripts/game-day-ops.ts Live",
    "final-checks": "./deploy/final-checks.sh",
    "wall-monitor": "./deploy/wall.sh",
    "scrape:improved": "python step_2_index_extractor_improved.py && python step_3_pitchlog_fetcher_improved.py",
    "scrape:integrated": "python integrated_data_collector.py",
    "scrape:backup-only": "python integrated_data_collector.py --yahoo-only",
    "yahoo:live": "npx tsx scripts/ingest_yahoo_live.ts",
    "yahoo:live:today": "npx tsx scripts/ingest_yahoo_live.ts $(date +%F)",
    "yahoo:backfill": "npx tsx scripts/backfill_yahoo.ts",
    "yahoo:backfill:npb1": "npx tsx scripts/backfill_yahoo.ts --level npb1",
    "yahoo:backfill:npb2": "npx tsx scripts/backfill_yahoo.ts --level npb2",
    "yahoo:backfill:farm-east": "npx tsx scripts/backfill_yahoo.ts --level npb2 --farm-league EAST",
    "yahoo:backfill:farm-west": "npx tsx scripts/backfill_yahoo.ts --level npb2 --farm-league WEST",
    "yahoo:metrics": "npx tsx -e \"import('./lib/metrics/yahoo-metrics').then(m => console.log(JSON.stringify(m.YahooMetricsRecorder.getInstance().getDetailedMetrics(), null, 2)))\"",
    "yahoo:health": "npx tsx -e \"import('./lib/metrics/yahoo-metrics').then(m => console.log(JSON.stringify(m.YahooMetricsRecorder.getInstance().checkAlertConditions(), null, 2)))\"",
    "baseballdata:complement": "npx tsx scripts/baseballdata_complement.ts",
    "baseballdata:complement:today": "npx tsx scripts/baseballdata-complement.ts",
    "data:validate": "npx tsx -e \"console.log('Data validation running...'); import('./lib/connectors/baseballdata-complement').then(m => m.runDailyComplement(process.argv[2] || new Date().toISOString().split('T')[0]))\"",
    "data:collection:status": "npm run yahoo:health && npm run data:quality",
    "health:monitor": "npx tsx scripts/health-monitor.ts",
    "cache:warm": "npx tsx scripts/cache-warmer.ts",
    "quality:check": "psql \"$PGURL\" -f scripts/pitch-monitoring.sql",
    "acceptance:monitor": "npx tsx scripts/acceptance-criteria-monitor.ts",
    "backfill:nightly": "./scripts/nightly-backfill.sh",
    "npb1:expansion:check": "npx tsx scripts/npb1-expansion-setup.ts",
    "replay:setup": "psql \"$PGURL\" -f scripts/create-replay-tables.sql",
    "replay:index": "npx tsx scripts/build-replay-index.ts",
    "replay:quality": "npx tsx scripts/analyze-replay-quality.ts",
    "vote:setup": "psql \"$PGURL\" -f scripts/create-voting-tables.sql",
    "vote:harden": "psql \"$PGURL\" -f scripts/voting-production-hardening.sql",
    "vote:test": "npx tsx scripts/voting-concurrency-test.ts",
    "vote:test:heavy": "npx tsx scripts/voting-concurrency-test.ts 100",
    "vote:metrics:start": "npx tsx scripts/voting-metrics.ts start",
    "vote:metrics:update": "npx tsx scripts/voting-metrics.ts update",
    "vote:metrics:details": "npx tsx scripts/voting-metrics.ts details",
    "vote:summary": "npx tsx -e \"import('pg').then(({Pool})=>new Pool({connectionString:process.env.PGURL}).query('SELECT update_daily_vote_summary()').then(r=>console.log('âœ… Daily summary updated:',r.rows[0])).catch(console.error).finally(()=>process.exit()))\"",
    "heatmap:precompute:all": "npx tsx scripts/heatmap_precompute.ts --all",
    "heatmap:precompute:today": "npx tsx scripts/heatmap_precompute.ts --today",
    "heatmap:precompute:pitcher": "npx tsx scripts/heatmap_precompute.ts --pitcher=${PITCHER_ID}",
    "heatmap:setup": "psql \"$PGURL\" -f scripts/create-heatmap-tables.sql",
    "heatmap:status": "npx tsx -e \"import('pg').then(({Pool})=>new Pool({connectionString:process.env.PGURL}).query('SELECT * FROM heatmap_summary').then(r=>console.log('âœ… Heatmap status:',r.rows[0])).catch(console.error).finally(()=>process.exit()))\""
  },
  "dependencies": {
    "@fastify/compress": "^8.1.0",
    "@fastify/cors": "^11.1.0",
    "@fastify/static": "^8.2.0",
    "@radix-ui/react-progress": "^1.1.7",
    "@radix-ui/react-tabs": "^1.1.12",
    "@types/better-sqlite3": "^7.6.13",
    "@types/cheerio": "^0.22.35",
    "@types/cli-progress": "^3.11.6",
    "@types/json2csv": "^5.0.7",
    "@types/node": "^20",
    "@types/node-fetch": "^2.6.13",
    "@types/pg": "^8.15.5",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "autoprefixer": "^10.0.1",
    "axios": "^1.11.0",
    "better-sqlite3": "^11.10.0",
    "cheerio": "^1.1.0",
    "chokidar": "^4.0.3",
    "class-variance-authority": "^0.7.1",
    "cli-progress": "^3.12.0",
    "clsx": "^2.0.0",
    "commander": "^14.0.0",
    "date-fns": "^4.1.0",
    "eventsource": "^4.0.0",
    "fast-glob": "^3.3.3",
    "fastify": "^5.5.0",
    "json2csv": "^6.0.0-alpha.2",
    "lru-cache": "^10.4.3",
    "lucide-react": "^0.294.0",
    "mysql2": "^3.14.3",
    "nanoid": "^5.1.5",
    "next": "14.0.4",
    "node-fetch": "^3.3.2",
    "onnxruntime-node": "^1.22.0-rev",
    "pg": "^8.16.3",
    "pino": "^9.8.0",
    "postcss": "^8",
    "prom-client": "^15.1.3",
    "react": "^18",
    "react-dom": "^18",
    "react-schemaorg": "^2.0.0",
    "recharts": "^2.8.0",
    "swr": "^2.3.4",
    "tailwind-merge": "^2.0.0",
    "tailwindcss": "^3.3.0",
    "ts-node": "^10.9.2",
    "typescript": "^5",
    "zod": "^4.0.17"
  },
  "devDependencies": {
    "@types/jsdom": "^21.1.7",
    "@vitest/ui": "^3.2.4",
    "eslint": "^8",
    "eslint-config-next": "14.0.4",
    "jsdom": "^25.0.1",
    "madge": "^8.0.0",
    "nock": "^14.0.9",
    "ts-prune": "^0.10.3",
    "vitest": "^3.2.4"
  }
}
